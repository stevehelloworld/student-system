# 學生系統測試案例文檔（自動同步自動化測試）

## 文檔目的
此文檔用於追蹤和記錄所有自動化測試案例，確保系統功能的正確性和穩定性。每當有新的自動化測試案例添加或現有測試案例修改時，此文檔都會同步更新。

## 測試案例格式
每個測試案例將包含以下信息：
- **測試 ID**: 唯一標識符
- **測試名稱**: 簡短描述測試目的
- **前置條件**: 執行測試所需的條件
- **測試步驟**: 詳細的測試執行步驟
- **預期結果**: 測試應該產生的結果
- **實際結果**: 測試執行後的實際結果
- **狀態**: 通過/失敗/待測試
- **最後更新時間**: 測試案例的最後修改時間

---

## 認證功能測試

### TC_AUTH_001: 使用有效資料註冊
- **前置條件**: 無
- **測試步驟**: 提交正確格式的註冊資料
- **預期結果**: 註冊成功，返回 user 物件
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_AUTH_002: 使用已存在 email 註冊
- **前置條件**: 資料庫已有該 email
- **測試步驟**: 提交重複 email 註冊
- **預期結果**: 註冊失敗，返回錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_AUTH_003: 缺少必要欄位註冊
- **前置條件**: 無
- **測試步驟**: 缺少欄位提交註冊
- **預期結果**: 註冊失敗，返回錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_AUTH_004: 正確帳密登入
- **前置條件**: 已有帳號
- **測試步驟**: 正確帳密登入
- **預期結果**: 登入成功，返回 token
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_AUTH_005: 錯誤密碼登入
- **前置條件**: 已有帳號
- **測試步驟**: 錯誤密碼登入
- **預期結果**: 登入失敗，返回錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_AUTH_006: 不存在帳號登入
- **前置條件**: 無
- **測試步驟**: 不存在帳號登入
- **預期結果**: 登入失敗，返回錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

---

## 課程功能測試

### TC_COURSE_001: 教師建立課程
- **前置條件**: 教師登入
- **測試步驟**: 教師提交正確課程資料
- **預期結果**: 建立成功，返回課程資料
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_002: 學生不能建立課程
- **前置條件**: 學生登入
- **測試步驟**: 學生提交課程資料
- **預期結果**: 建立失敗，返回權限錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_003: 缺少必要欄位建立課程
- **前置條件**: 教師登入
- **測試步驟**: 缺少欄位提交課程
- **預期結果**: 建立失敗，返回錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_004: 查詢所有課程
- **前置條件**: 已有課程
- **測試步驟**: 查詢所有課程
- **預期結果**: 返回課程列表
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_005: 查詢單一課程
- **前置條件**: 已有課程
- **測試步驟**: 查詢單一課程
- **預期結果**: 返回課程資料
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_006: 查詢不存在課程
- **前置條件**: 無
- **測試步驟**: 查詢不存在課程
- **預期結果**: 返回 404 錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_007: 教師更新自己的課程
- **前置條件**: 教師登入
- **測試步驟**: 教師更新自己課程
- **預期結果**: 更新成功
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_008: 教師不能更新他人課程
- **前置條件**: 另一教師登入
- **測試步驟**: 另一教師更新課程
- **預期結果**: 更新失敗，返回權限錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_009: 教師刪除自己的課程
- **前置條件**: 教師登入
- **測試步驟**: 教師刪除自己課程
- **預期結果**: 刪除成功
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_COURSE_010: 教師不能刪除他人課程
- **前置條件**: 另一教師登入
- **測試步驟**: 另一教師刪除課程
- **預期結果**: 刪除失敗，返回權限錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

---

## 出勤記錄功能測試

### TC_ATTEND_001: 教師建立出勤記錄
- **前置條件**: 教師登入，課程單元存在
- **測試步驟**: 教師建立出勤記錄
- **預期結果**: 建立成功
- **實際結果**: 失敗（驗證 status 欄位）
- **狀態**: 失敗
- **最後更新時間**: 2025-06-02

### TC_ATTEND_002: 學生不能建立出勤記錄
- **前置條件**: 學生登入
- **測試步驟**: 學生建立出勤記錄
- **預期結果**: 權限錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_003: 缺少必要欄位建立出勤記錄
- **前置條件**: 教師登入
- **測試步驟**: 缺少欄位建立出勤記錄
- **預期結果**: 建立失敗，返回錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_004: 查詢所有出勤記錄
- **前置條件**: 已有出勤記錄
- **測試步驟**: 查詢所有出勤記錄
- **預期結果**: 返回出勤記錄列表
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_005: 查詢單一出勤記錄
- **前置條件**: 已有出勤記錄
- **測試步驟**: 查詢單一出勤記錄
- **預期結果**: 返回出勤記錄
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_006: 查詢課程單元的所有出勤記錄
- **前置條件**: 已有出勤記錄
- **測試步驟**: 查詢課程單元出勤記錄
- **預期結果**: 返回出勤記錄
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_007: 查詢學生的所有出勤記錄
- **前置條件**: 已有出勤記錄
- **測試步驟**: 查詢學生出勤記錄
- **預期結果**: 返回出勤記錄
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_008: 教師更新出勤記錄
- **前置條件**: 教師登入，出勤記錄存在
- **測試步驟**: 教師更新出勤記錄
- **預期結果**: 更新成功
- **實際結果**: 失敗（驗證 status 欄位）
- **狀態**: 失敗
- **最後更新時間**: 2025-06-02

### TC_ATTEND_009: 學生不能更新出勤記錄
- **前置條件**: 學生登入
- **測試步驟**: 學生更新出勤記錄
- **預期結果**: 權限錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_010: 教師刪除出勤記錄
- **前置條件**: 教師登入，出勤記錄存在
- **測試步驟**: 教師刪除出勤記錄
- **預期結果**: 刪除成功
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_ATTEND_011: 學生不能刪除出勤記錄
- **前置條件**: 學生登入
- **測試步驟**: 學生刪除出勤記錄
- **預期結果**: 權限錯誤
- **實際結果**: 通過
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

---

## 請假功能測試

### TC_LEAVE_001: 學生申請請假（事假/病假）
- **前置條件**: 學生已登入，課程場次存在
- **測試步驟**: 學生針對課程場次申請事假/病假
- **預期結果**: 請假申請成功，請假紀錄同步至出勤紀錄
- **實際結果**: 通過（API 回傳 success: true，資料正確寫入 leave_requests）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_LEAVE_002: 學生取消請假
- **前置條件**: 學生已申請請假
- **測試步驟**: 學生於截止前取消請假
- **預期結果**: 請假紀錄狀態變更為 cancelled
- **實際結果**: 通過（API 回傳 success: true，leave_requests.status 變為 cancelled，cancelled_at 有值）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_LEAVE_003: 教師登記/修改/刪除學生請假
- **前置條件**: 教師已登入，學生有請假紀錄
- **測試步驟**: 教師為學生登記/修改/刪除請假
- **預期結果**: 請假紀錄正確變更，並同步至出勤紀錄
- **實際結果**: 通過（API 回傳 success: true，leave_requests 正確新增/修改/取消，權限驗證正確）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

---

## 補課安排功能測試

### TC_MAKEUP_001: 教師可針對請假安排補課
- **前置條件**: 教師登入，學生有請假紀錄
- **測試步驟**: 教師針對請假紀錄呼叫 POST /api/leave_requests/:leaveId/make_up，填寫補課日期與時間
- **預期結果**: 回傳 success: true 並有 make_up_session_id，資料正確寫入 make_up_sessions
- **實際結果**: 通過（API 回傳正確，資料正確寫入）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_MAKEUP_002: 非教師不可安排補課
- **前置條件**: 學生登入
- **測試步驟**: 學生針對請假紀錄呼叫 POST /api/leave_requests/:leaveId/make_up
- **預期結果**: 回傳 403 權限錯誤
- **實際結果**: 通過（API 回傳 403）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_MAKEUP_003: 欄位驗證失敗
- **前置條件**: 教師登入
- **測試步驟**: 教師呼叫 POST /api/leave_requests/:leaveId/make_up，缺少 make_up_date、start_time、end_time
- **預期結果**: 回傳 400 錯誤
- **實際結果**: 通過（API 回傳 400）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02

### TC_MAKEUP_004: 學生查詢自己的補課安排
- **前置條件**: 學生登入，資料庫有補課安排
- **測試步驟**: 學生呼叫 GET /api/users/me/make_up_sessions
- **預期結果**: 回傳自己的所有補課安排，欄位正確
- **實際結果**: 通過（API 回傳正確，資料正確查詢）
- **狀態**: 通過
- **最後更新時間**: 2025-06-02 

---

## 注意事項
1. 所有測試案例更新必須記錄在更新歷史中
2. 測試結果必須及時更新
3. 如發現問題，需要立即記錄並通知相關開發人員
4. 定期審查測試案例以確保其時效性和完整性

## 更新歷史
| 日期 | 更新內容 | 更新人 |
|------|----------|--------|
| 2025-06-02 | 自動同步所有自動化測試案例與狀態 | System Admin |

## 待修復問題
1. TC_ATTEND_001 中的出勤狀態驗證錯誤需要修復：
   - 問題：出勤狀態驗證錯誤
   - 原因：狀態值必須是指定的 enum 值（present, absent, late, leave）
   - 建議：修改測試案例中的狀態值為正確的 enum 值 